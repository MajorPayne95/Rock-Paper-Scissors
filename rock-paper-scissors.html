<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        // Rock Papaer Scissors Game
        
        // Gives choice of Rock
        let rock = "rock"
        // Gives choice of Paper
        let paper = "paper"
        // Gives choice of Scissors
        let scissors = "scissors"
        let tie = "It's a tie!";
        let youWin = "You win!";
        let cpuWin = "You lose!";
        let userScore = parseInt(0);
        let computerScore = parseInt(0);

        function playerChoice() {
            // Gives prompt for user to input their choice
            let userChoice = prompt('Rock, Paper, or Scissors?');
            // Sets user choice to lower case for consistancy in algorithm
            let lowerUserChoice = userChoice.toLowerCase();

            // Creates loop to iterate through prompt inputs to ensure they are valid for rock paper scissors
            for (let j = 0; j < 1; j++) {
                // If input is identical to rock, prints to console
                if (lowerUserChoice === rock) {
                //console.log("User choice is: " + lowerUserChoice);
                // If input is identical to paper, prints to console
                } else if (lowerUserChoice === paper) {
                //console.log("User choice is: " + lowerUserChoice);
                // If input is identical to scissors, prints to console
                } else if (lowerUserChoice === scissors) {
                //console.log("User choice is: " + lowerUserChoice);
                // If input is not identical to rock, paper, or scissors user is reprompted to enter a valid choice
                } else {
                   lowerUserChoice = prompt("Invalid entry!  Try again");
                    j--; // This sets the value of i in the for loop to -1, so when it i++ it still remains < 1.  This lets the loop repeat until a valid choice is entered.
                }
            }
            //console.log("The valid user input is: "+ lowerUserChoice);
            return lowerUserChoice;
        }  
        
        // Make functions that randomly selects CPU choice
        function cpuChoice () {
            // Puts all choices into an array for random selection algorithm to be used
            let cpuOptions = [rock, paper, scissors];
            // Algorithm that finds a random index of any array using its length as the ceiling value to be multiplied to
            let cpuRandom = Math.floor((Math.random() * cpuOptions.length));
            // Sets the variable cpuDicision to the data at the index number found in cpuOptions array calculated from cpuRandom calculation
            let cpuDecision = cpuOptions[cpuRandom];
            //returns cpu decision
            //console.log("cpuDecision = " + cpuDecision)
            return cpuDecision;
        }
        // Verifies cpuChoice is working correctly
        //console.log("The CPU choice is " + cpuChoice());

        function playRound (playerHand, cpuHand) {

            //console.log(playerHand + " " + cpuHand)

            if (playerHand === cpuHand) {
                return tie;
            } else {
                if (playerHand === rock) {
                    if (cpuHand === paper) {
                        computerScore++
                        return cpuWin
                    } else {
                        userScore++
                        return youWin
                    }
                } else if (playerHand === paper) {
                    if (cpuHand === scissors) {
                        computerScore++
                        return cpuWin
                    } else {
                        userScore++
                        return youWin
                    }
                } else if (playerHand === scissors) {
                    if (cpuHand === rock) {
                        computerScore++
                        return cpuWin
                    } else {
                        userScore++
                        return youWin
                    }
                }
            }
        }

        // Compare CPU choise to user input
        for (let i = 0; i < 5; i++) {
            const cpuHand = cpuChoice();
            const playerHand = playerChoice();
            if (playerHand === cpuHand) {
                alert("Tie round!")
                i--
            } else {
                console.log(playRound(playerHand, cpuHand));
                console.log("your score = " + userScore);
                console.log("Computer's score = " + computerScore);
            }
        }

    </script>
</body>
</html>